<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <title>Jelajahi Indonesia ‚Äì SD Integra</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body {
      overscroll-behavior: contain;
      touch-action: manipulation;
    }
    .province {
      fill: #4ade80;
      stroke: #16a34a;
      stroke-width: 0.8;
      transition: fill 0.2s;
      cursor: pointer;
    }
    .province:hover, .province.active {
      fill: #22c55e;
    }
    .info-box {
      max-width: 300px;
      background: white;
      border-radius: 12px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.15);
      padding: 16px;
      margin-top: 16px;
    }
    .hidden { display: none; }
    .quiz-option {
      display: block;
      width: 100%;
      padding: 12px;
      margin: 8px 0;
      background: #f1f5f9;
      border: 2px solid #cbd5e1;
      border-radius: 8px;
      text-align: left;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s;
    }
    .quiz-option:hover { background: #e2e8f0; }
    .quiz-option.selected { border-color: #0d9488; background: #f0fdf4; }
    .btn {
      background: #0d9488;
      color: white;
      padding: 10px 20px;
      border: none;
      border-radius: 8px;
      font-weight: bold;
      cursor: pointer;
      transition: background 0.2s;
    }
    .btn:hover { background: #0b7a75; }
  </style>
</head>
<body class="bg-sky-50 font-sans">

  <div class="container mx-auto px-4 py-6 max-w-6xl">
    <h1 class="text-3xl font-bold text-center text-emerald-800 mb-2">Jelajahi Kenampakan Alam Indonesia</h1>
    <p class="text-center text-gray-600 mb-6">Sentuh provinsi untuk belajar, lalu uji pengetahuanmu!</p>

    <!-- Main View: Map -->
    <div id="map-view" class="block">
      <div class="flex flex-col lg:flex-row items-center gap-6">
        <div class="w-full lg:w-2/3">
          <div style="overflow: hidden; border-radius: 12px; background: #f0fdf4; padding: 8px;">
            <svg id="indonesia-map" viewBox="0 0 1000 800" class="w-full h-auto" preserveAspectRatio="xMidYMid meet">
              <!-- 10 Provinsi Representatif (sesuai kurikulum SD) -->
              <path id="sumut" class="province" d="M180,300 L220,280 L230,310 L190,330 Z" />
              <path id="jabar" class="province" d="M320,480 L340,470 L350,485 L330,500 Z" />
              <path id="jateng" class="province" d="M350,485 L370,475 L380,490 L360,505 Z" />
              <path id="jatim" class="province" d="M380,490 L410,480 L420,500 L390,515 Z" />
              <path id="bali" class="province" d="M400,510 L415,505 L420,515 L405,520 Z" />
              <path id="kalbar" class="province" d="M280,380 L320,360 L330,390 L290,410 Z" />
              <path id="sulsel" class="province" d="M520,450 L550,430 L560,460 L530,480 Z" />
              <path id="papua" class="province" d="M650,350 L720,320 L730,370 L660,400 Z" />
              <path id="jakarta" class="province" d="M335,488 L345,483 L348,490 L338,495 Z" />
              <path id="yogya" class="province" d="M365,492 L372,488 L375,494 L368,498 Z" />
            </svg>
          </div>
        </div>

        <div class="w-full lg:w-1/3">
          <div id="default-info" class="info-box text-center">
            <p class="text-gray-500">Sentuh provinsi untuk melihat kenampakan alamnya!</p>
            <button id="start-quiz-btn" class="btn mt-4 w-full">üß† Mulai Kuis!</button>
          </div>
          <div id="province-info" class="info-box hidden">
            <h3 id="info-title" class="text-lg"></h3>
            <p id="info-desc"></p>
            <p id="info-feature" class="mt-2 font-medium text-emerald-700"></p>
            <button id="quiz-btn" class="btn mt-4 w-full">üß† Uji Pengetahuanmu!</button>
          </div>
        </div>
      </div> <!-- ./flex -->
    </div> <!-- /#map-view -->

    <!-- Quiz View -->
    <div id="quiz-view" class="hidden flex flex-col items-center">
      <h2 class="text-2xl font-bold text-emerald-800 mb-6">Kuis: Kenampakan Alam Indonesia</h2>
      <div id="quiz-content" class="w-full max-w-2xl">
        <!-- Soal akan diisi via JS -->
      </div>
      <div id="result" class="hidden text-center mt-6 p-6 rounded-xl bg-white shadow">
        <h3 class="text-2xl font-bold" id="score-text"></h3>
        <p id="feedback" class="mt-2 text-lg"></p>
        <button id="restart-btn" class="btn mt-4">Ulangi Eksplorasi</button>
      </div>
    </div>

  </div>

  <script>
    // Data provinsi (untuk peta & kuis)
    const provinceData = {
      sumut: { name: "Sumatra Utara", feature: "Danau Toba" },
      jabar: { name: "Jawa Barat", feature: "Gunung Tangkuban Perahu" },
      jateng: { name: "Jawa Tengah", feature: "Candi Borobudur" },
      jatim: { name: "Jawa Timur", feature: "Gunung Bromo" },
      bali: { name: "Bali", feature: "Sawah Terasering Tegallalang" },
      kalbar: { name: "Kalimantan Barat", feature: "Taman Nasional Danau Sentarum" },
      sulsel: { name: "Sulawesi Selatan", feature: "Taman Laut Takabonerate" },
      papua: { name: "Papua", feature: "Raja Ampat" },
      jakarta: { name: "DKI Jakarta", feature: "Waduk Pluit" },
      yogya: { name: "DI Yogyakarta", feature: "Pantai Parangtritis" }
    };

    // Soal kuis (acak otomatis)
    const quizQuestions = [
      {
        question: "Provinsi mana yang memiliki Danau Toba?",
        correct: "sumut",
        options: ["jabar", "sumut", "jatim", "bali"]
      },
      {
        question: "Gunung Bromo berada di provinsi...",
        correct: "jatim",
        options: ["jateng", "yogya", "jatim", "jabar"]
      },
      {
        question: "Destinasi bawah laut terkenal Raja Ampat ada di...",
        correct: "papua",
        options: ["sulsel", "kalbar", "papua", "jateng"]
      }
    ];

    // DOM
    const mapView = document.getElementById('map-view');
    const quizView = document.getElementById('quiz-view');
    const quizContent = document.getElementById('quiz-content');
    const resultBox = document.getElementById('result');

    // Event: Mulai kuis
    document.getElementById('start-quiz-btn')?.addEventListener('click', startQuiz);
    document.getElementById('quiz-btn')?.addEventListener('click', startQuiz);
    document.getElementById('restart-btn')?.addEventListener('click', () => {
      resultBox.classList.add('hidden');
      quizView.classList.add('hidden');
      mapView.classList.remove('hidden');
    });

    // Tampilkan info provinsi
    function showProvinceInfo(id) {
      const data = provinceData[id];
      if (!data) return;
      document.getElementById('info-title').textContent = data.name;
      document.getElementById('info-desc').textContent = "Pelajari kenampakan alam unggulannya!";
      document.getElementById('info-feature').textContent = "üìç " + data.feature;
      document.getElementById('default-info').classList.add('hidden');
      document.getElementById('province-info').classList.remove('hidden');
    }

    // Tambahkan event ke provinsi
    document.querySelectorAll('.province').forEach(path => {
      path.addEventListener('click', () => showProvinceInfo(path.id));
      path.addEventListener('touchstart', e => { e.preventDefault(); showProvinceInfo(path.id); });
    });

    // === KUIS ===
    let currentQuestion = 0;
    let score = 0;

    function startQuiz() {
      currentQuestion = 0;
      score = 0;
      mapView.classList.add('hidden');
      quizView.classList.remove('hidden');
      resultBox.classList.add('hidden');
      loadQuestion();
    }

    function loadQuestion() {
      if (currentQuestion >= quizQuestions.length) {
        showResult();
        return;
      }

      const q = quizQuestions[currentQuestion];
      let html = `<div class="bg-white p-6 rounded-xl shadow mb-6">
        <h3 class="text-xl font-bold mb-4">Pertanyaan ${currentQuestion + 1} dari ${quizQuestions.length}</h3>
        <p class="mb-4">${q.question}</p>
        <div id="options">`;

      // Acak opsi
      const shuffled = [...q.options].sort(() => Math.random() - 0.5);
      shuffled.forEach(opt => {
        const prov = provinceData[opt];
        html += `<button class="quiz-option" onclick="selectAnswer('${opt}', '${q.correct}')">
          ${prov.name}
        </button>`;
      });

      html += `</div></div>`;
      quizContent.innerHTML = html;
    }

    function selectAnswer(selected, correct) {
      const buttons = document.querySelectorAll('.quiz-option');
      buttons.forEach(btn => btn.disabled = true);

      if (selected === correct) {
        score++;
        document.querySelector(`.quiz-option`).nextElementSibling?.parentElement
          .querySelector(`.quiz-option`).style.background = '#dcfce7';
        // Highlight benar
        document.querySelector(`.quiz-option`).textContent = provinceData[selected].name;
        // Tambahkan feedback
        setTimeout(() => {
          currentQuestion++;
          loadQuestion();
        }, 1500);
      } else {
        // Tampilkan yang benar
        buttons.forEach(btn => {
          if (btn.textContent.trim() === provinceData[correct].name) {
            btn.style.borderColor = '#16a34a';
            btn.style.background = '#dcfce7';
          } else if (btn.textContent.trim() === provinceData[selected].name) {
            btn.style.borderColor = '#ef4444';
            btn.style.background = '#fee2e2';
          }
        });
        setTimeout(() => {
          currentQuestion++;
          loadQuestion();
        }, 2000);
      }
    }

    function showResult() {
      quizContent.innerHTML = '';
      const percentage = Math.round((score / quizQuestions.length) * 100);
      document.getElementById('score-text').textContent = `Skor: ${score} dari ${quizQuestions.length}`;
      
      let feedback = "";
      if (percentage === 100) feedback = "üéâ Luar biasa! Kamu Juara Integritas Geografi!";
      else if (percentage >= 70) feedback = "üëç Hebat! Kamu sudah mengenal Indonesia dengan baik.";
      else feedback = "üí° Terus belajar, ya! Setiap wilayah Indonesia punya keajaiban.";

      document.getElementById('feedback').textContent = feedback;
      resultBox.classList.remove('hidden');
    }
  </script>
</body>
</html>