<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Akademik - SD Cerdas Ceria</title>
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Header & Navigation -->
    <header class="header">
        <nav class="navbar">
            <div class="nav-container">
                <div class="nav-logo">
                    <i class="fas fa-graduation-cap"></i>
                    <span>SD Cerdas Ceria</span>
                </div>
                
                <ul class="nav-menu">
                    <li class="nav-item"><a href="index.html" class="nav-link">Beranda</a></li>
                    <li class="nav-item"><a href="profil.html" class="nav-link">Profil</a></li>
                    <li class="nav-item"><a href="berita.html" class="nav-link">Berita</a></li>
                    <li class="nav-item"><a href="akademik.html" class="nav-link active">Akademik</a></li>
                    <li class="nav-item dropdown">
                        <a href="info.html" class="nav-link dropdown-toggle">Info</a>
                        <ul class="dropdown-menu">
                            <li><a href="info.html">Informasi Umum</a></li>
                            <li><a href="transparansi.html">Transparansi</a></li>
                        </ul>
                    </li>
                    <li class="nav-item"><a href="inovasi.html" class="nav-link">Inovasi</a></li>
                    <li class="nav-item"><a href="kontak.html" class="nav-link">Kontak</a></li>
                </ul>
                
                <div class="hamburger">
                    <span class="bar"></span>
                    <span class="bar"></span>
                    <span class="bar"></span>
                </div>
            </div>
        </nav>
    </header>

    <!-- Page Header -->
    <section class="page-header">
        <div class="container">
            <div class="page-header-content">
                <h1>Program Akademik</h1>
                <p>Kurikulum dan program pembelajaran yang berkualitas</p>
                <nav class="breadcrumb">
                    <a href="index.html">Beranda</a>
                    <span>/</span>
                    <span>Akademik</span>
                </nav>
            </div>
        </div>
    </section>

    <!-- Filter Section -->
    <section class="academic-filter">
        <div class="container">
            <div class="filter-container">
                <div class="filter-group">
                    <label for="gradeFilter">Tingkat Kelas:</label>
                    <select id="gradeFilter" onchange="filterPrograms()">
                        <option value="">Semua Tingkat</option>
                        <option value="1">Kelas 1</option>
                        <option value="2">Kelas 2</option>
                        <option value="3">Kelas 3</option>
                        <option value="4">Kelas 4</option>
                        <option value="5">Kelas 5</option>
                        <option value="6">Kelas 6</option>
                        <option value="semua">Semua Kelas</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label for="curriculumFilter">Jenis Kurikulum:</label>
                    <select id="curriculumFilter" onchange="filterPrograms()">
                        <option value="">Semua Kurikulum</option>
                        <option value="nasional">Kurikulum Nasional</option>
                        <option value="internasional">Kurikulum Internasional</option>
                        <option value="muatan_lokal">Muatan Lokal</option>
                    </select>
                </div>
            </div>
        </div>
    </section>

    <!-- Programs Section -->
    <section class="academic-programs">
        <div class="container">
            <!-- Loading State -->
            <div id="loading" class="loading-state">
                <div class="spinner"></div>
                <p>Memuat program akademik...</p>
            </div>

            <!-- Error State -->
            <div id="error" class="error-state hidden">
                <i class="fas fa-exclamation-triangle"></i>
                <h3>Gagal Memuat Data</h3>
                <p>Terjadi kesalahan saat memuat program akademik. Silakan coba lagi.</p>
                <button onclick="loadPrograms()" class="btn btn-primary">Coba Lagi</button>
            </div>

            <!-- Programs List -->
            <div id="programsList" class="hidden">
                <div id="programsContainer" class="programs-grid"></div>
                
                <!-- Pagination -->
                <div id="pagination" class="pagination hidden">
                    <div></div>
                </div>
            </div>

            <!-- Empty State -->
            <div id="emptyState" class="empty-state hidden">
                <i class="fas fa-book-open"></i>
                <h3>Tidak Ada Program</h3>
                <p>Belum ada program akademik yang tersedia untuk kriteria yang dipilih.</p>
            </div>
        </div>
    </section>

    <!-- Program Detail Modal -->
    <div id="programModal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modalTitle"></h3>
                <button onclick="closeModal()" class="modal-close">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div id="modalBody" class="modal-body"></div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <div class="footer-logo">
                        <i class="fas fa-graduation-cap"></i>
                        <span>SD Cerdas Ceria</span>
                    </div>
                    <p>Membentuk generasi cerdas dan berkarakter untuk masa depan Indonesia yang lebih baik.</p>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2024 SD Cerdas Ceria. Semua hak dilindungi undang-undang.</p>
            </div>
        </div>
    </footer>

    <script src="js/script.js"></script>
    <script>
    // Academic Programs API Integration
    let currentPage = 1;
    let currentGrade = '';
    let currentCurriculum = '';
    const itemsPerPage = 9;
    
    // API Base URL
    const API_URL = '/sd/api/academic.php';
    
    // Initialize academic page
    document.addEventListener('DOMContentLoaded', function() {
        loadPrograms();
    });
    
    // Load programs from API
    async function loadPrograms() {
        showLoading();
        hideError();
        
        try {
            let url = `${API_URL}?action=list&page=${currentPage}&limit=${itemsPerPage}`;
            
            if (currentGrade) {
                url += `&grade_level=${currentGrade}`;
            }
            
            if (currentCurriculum) {
                url += `&curriculum_type=${currentCurriculum}`;
            }
            
            const response = await fetch(url);
            const data = await response.json();
            
            if (data.success) {
                displayPrograms(data.data);
                displayPagination(data.pagination);
                showContent();
            } else {
                throw new Error(data.message || 'Failed to load programs');
            }
        } catch (error) {
            console.error('Error loading programs:', error);
            showError();
        }
    }
    
    // Display programs list
    function displayPrograms(programs) {
        const container = document.getElementById('programsContainer');
        const programsList = document.getElementById('programsList');
        const emptyState = document.getElementById('emptyState');
        
        if (programs.length === 0) {
            programsList.classList.add('hidden');
            emptyState.classList.remove('hidden');
            return;
        }
        
        container.innerHTML = programs.map(program => `
            <div class="program-card" onclick="openProgramModal(${program.id})">
                <div class="program-image">
                    ${program.image ? 
                        `<img src="${program.image}" alt="${program.title}" />` : 
                        `<div class="placeholder-image">
                            <i class="fas fa-book-open"></i>
                        </div>`
                    }
                </div>
                <div class="program-content">
                    <div class="program-meta">
                        <span class="grade-badge">${program.grade_level_name}</span>
                        ${program.curriculum_type_name ? 
                            `<span class="curriculum-badge">${program.curriculum_type_name}</span>` : 
                            ''
                        }
                    </div>
                    <h3 class="program-title">${program.title}</h3>
                    <p class="program-description">${program.description.length > 120 ? program.description.substring(0, 120) + '...' : program.description}</p>
                    
                    ${program.subjects.length > 0 ? 
                        `<div class="program-subjects">
                            <i class="fas fa-book text-primary"></i>
                            <span>Mata Pelajaran: ${program.subjects.slice(0, 3).join(', ')}${program.subjects.length > 3 ? ', ...' : ''}</span>
                        </div>` : 
                        ''
                    }
                    
                    <div class="program-footer">
                        <button class="btn btn-outline">Lihat Detail</button>
                    </div>
                </div>
            </div>
        `).join('');
        
        programsList.classList.remove('hidden');
        emptyState.classList.add('hidden');
    }
    
    // Display pagination
    function displayPagination(pagination) {
        const container = document.getElementById('pagination');
        
        if (pagination.total_pages <= 1) {
            container.classList.add('hidden');
            return;
        }
        
        let paginationHTML = '';
        
        // Previous button
        if (pagination.current_page > 1) {
            paginationHTML += `<button onclick="changePage(${pagination.current_page - 1})" class="btn btn-outline">‹ Sebelumnya</button>`;
        }
        
        // Page numbers
        const startPage = Math.max(1, pagination.current_page - 2);
        const endPage = Math.min(pagination.total_pages, pagination.current_page + 2);
        
        for (let i = startPage; i <= endPage; i++) {
            const isActive = i === pagination.current_page;
            paginationHTML += `<button onclick="changePage(${i})" class="btn ${isActive ? 'btn-primary' : 'btn-outline'}">${i}</button>`;
        }
        
        // Next button
        if (pagination.current_page < pagination.total_pages) {
            paginationHTML += `<button onclick="changePage(${pagination.current_page + 1})" class="btn btn-outline">Selanjutnya ›</button>`;
        }
        
        container.querySelector('div').innerHTML = paginationHTML;
        container.classList.remove('hidden');
    }
    
    // Change page
    function changePage(page) {
        currentPage = page;
        loadPrograms();
        document.getElementById('programsList').scrollIntoView({ behavior: 'smooth' });
    }
    
    // Filter programs
    function filterPrograms() {
        currentGrade = document.getElementById('gradeFilter').value;
        currentCurriculum = document.getElementById('curriculumFilter').value;
        currentPage = 1;
        loadPrograms();
    }
    
    // Open program detail modal
    async function openProgramModal(programId) {
        try {
            const response = await fetch(`${API_URL}?action=detail&id=${programId}`);
            const data = await response.json();
            
            if (data.success) {
                displayProgramModal(data.data);
            } else {
                alert('Gagal memuat detail program');
            }
        } catch (error) {
            console.error('Error loading program detail:', error);
            alert('Terjadi kesalahan saat memuat detail program');
        }
    }
    
    // Display program detail in modal
    function displayProgramModal(program) {
        const modal = document.getElementById('programModal');
        const title = document.getElementById('modalTitle');
        const body = document.getElementById('modalBody');
        
        title.textContent = program.title;
        
        body.innerHTML = `
            <div class="program-detail">
                ${program.image ? 
                    `<div class="program-detail-image">
                        <img src="${program.image}" alt="${program.title}" />
                    </div>` : 
                    ''
                }
                
                <div class="program-detail-meta">
                    <span class="grade-badge">${program.grade_level_name}</span>
                    ${program.curriculum_type_name ? 
                        `<span class="curriculum-badge">${program.curriculum_type_name}</span>` : 
                        ''
                    }
                </div>
                
                <div class="program-detail-description">
                    <p>${program.description}</p>
                </div>
                
                <div class="program-detail-sections">
                    ${program.subjects.length > 0 ? 
                        `<div class="detail-section">
                            <h4><i class="fas fa-book"></i> Mata Pelajaran</h4>
                            <ul>
                                ${program.subjects.map(subject => `<li>${subject}</li>`).join('')}
                            </ul>
                        </div>` : 
                        ''
                    }
                    
                    ${program.learning_methods.length > 0 ? 
                        `<div class="detail-section">
                            <h4><i class="fas fa-chalkboard-teacher"></i> Metode Pembelajaran</h4>
                            <ul>
                                ${program.learning_methods.map(method => `<li>${method}</li>`).join('')}
                            </ul>
                        </div>` : 
                        ''
                    }
                    
                    ${program.assessment_methods.length > 0 ? 
                        `<div class="detail-section">
                            <h4><i class="fas fa-clipboard-check"></i> Metode Penilaian</h4>
                            <ul>
                                ${program.assessment_methods.map(method => `<li>${method}</li>`).join('')}
                            </ul>
                        </div>` : 
                        ''
                    }
                </div>
            </div>
        `;
        
        modal.classList.remove('hidden');
        document.body.style.overflow = 'hidden';
    }
    
    // Close modal
    function closeModal() {
        document.getElementById('programModal').classList.add('hidden');
        document.body.style.overflow = 'auto';
    }
    
    // Show/hide states
    function showLoading() {
        document.getElementById('loading').classList.remove('hidden');
        document.getElementById('programsList').classList.add('hidden');
        document.getElementById('pagination').classList.add('hidden');
        document.getElementById('emptyState').classList.add('hidden');
    }
    
    function showContent() {
        document.getElementById('loading').classList.add('hidden');
    }
    
    function showError() {
        document.getElementById('loading').classList.add('hidden');
        document.getElementById('error').classList.remove('hidden');
        document.getElementById('programsList').classList.add('hidden');
        document.getElementById('pagination').classList.add('hidden');
        document.getElementById('emptyState').classList.add('hidden');
    }
    
    function hideError() {
        document.getElementById('error').classList.add('hidden');
    }
    
    // Close modal when clicking outside
    document.getElementById('programModal').addEventListener('click', function(e) {
        if (e.target === this) {
            closeModal();
        }
    });
    </script>
    
    <style>
    /* Academic Programs Styles */
    .academic-filter {
        background: #f8f9fa;
        padding: 2rem 0;
        border-bottom: 1px solid #e9ecef;
    }
    
    .filter-container {
        display: flex;
        gap: 2rem;
        flex-wrap: wrap;
        justify-content: center;
    }
    
    .filter-group {
        display: flex;
        flex-direction: column;
        gap: 0.5rem;
        min-width: 200px;
    }
    
    .filter-group label {
        font-weight: 600;
        color: #495057;
        font-size: 0.9rem;
    }
    
    .filter-group select {
        padding: 0.75rem 1rem;
        border: 2px solid #e9ecef;
        border-radius: 0.5rem;
        font-size: 1rem;
        background: white;
        transition: border-color 0.3s ease;
    }
    
    .filter-group select:focus {
        outline: none;
        border-color: var(--primary-color);
        box-shadow: 0 0 0 3px rgba(0, 123, 255, 0.1);
    }
    
    .academic-programs {
        padding: 3rem 0;
    }
    
    .programs-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
        gap: 2rem;
        margin-top: 2rem;
    }
    
    .program-card {
        background: white;
        border-radius: 1rem;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        overflow: hidden;
        transition: all 0.3s ease;
        cursor: pointer;
    }
    
    .program-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
    }
    
    .program-image {
        height: 200px;
        overflow: hidden;
    }
    
    .program-image img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        transition: transform 0.3s ease;
    }
    
    .program-card:hover .program-image img {
        transform: scale(1.05);
    }
    
    .placeholder-image {
        width: 100%;
        height: 100%;
        background: linear-gradient(135deg, var(--primary-color), var(--accent-color));
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
        font-size: 3rem;
    }
    
    .program-content {
        padding: 1.5rem;
    }
    
    .program-meta {
        display: flex;
        gap: 0.5rem;
        margin-bottom: 1rem;
        flex-wrap: wrap;
    }
    
    .grade-badge {
        background: #e3f2fd;
        color: #1976d2;
        padding: 0.25rem 0.75rem;
        border-radius: 1rem;
        font-size: 0.8rem;
        font-weight: 600;
    }
    
    .curriculum-badge {
        background: #f3e5f5;
        color: #7b1fa2;
        padding: 0.25rem 0.75rem;
        border-radius: 1rem;
        font-size: 0.8rem;
        font-weight: 600;
    }
    
    .program-title {
        font-size: 1.25rem;
        font-weight: 700;
        color: #212529;
        margin-bottom: 0.75rem;
        line-height: 1.3;
    }
    
    .program-description {
        color: #6c757d;
        line-height: 1.6;
        margin-bottom: 1rem;
    }
    
    .program-subjects {
        display: flex;
        align-items: center;
        gap: 0.5rem;
        color: #495057;
        font-size: 0.9rem;
        margin-bottom: 1rem;
        padding: 0.5rem;
        background: #f8f9fa;
        border-radius: 0.5rem;
    }
    
    .program-footer {
        padding-top: 1rem;
        border-top: 1px solid #e9ecef;
    }
    
    /* Loading, Error, and Empty States */
    .loading-state, .error-state, .empty-state {
        text-align: center;
        padding: 3rem 0;
    }
    
    .loading-state .spinner {
        width: 40px;
        height: 40px;
        border: 4px solid #f3f3f3;
        border-top: 4px solid var(--primary-color);
        border-radius: 50%;
        animation: spin 1s linear infinite;
        margin: 0 auto 1rem;
    }
    
    @keyframes spin {
        0% { transform: rotate(0deg); }
        100% { transform: rotate(360deg); }
    }
    
    .error-state i, .empty-state i {
        font-size: 4rem;
        color: #dee2e6;
        margin-bottom: 1rem;
    }
    
    .error-state h3, .empty-state h3 {
        font-size: 1.5rem;
        color: #495057;
        margin-bottom: 0.5rem;
    }
    
    .error-state p, .empty-state p {
        color: #6c757d;
        margin-bottom: 1.5rem;
    }
    
    /* Modal Styles */
    .modal {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.8);
        display: flex;
        align-items: center;
        justify-content: center;
        z-index: 1000;
        padding: 1rem;
    }
    
    .modal-content {
        background: white;
        border-radius: 1rem;
        max-width: 800px;
        width: 100%;
        max-height: 90vh;
        overflow-y: auto;
    }
    
    .modal-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 1.5rem;
        border-bottom: 1px solid #e9ecef;
    }
    
    .modal-header h3 {
        margin: 0;
        font-size: 1.5rem;
        color: #212529;
    }
    
    .modal-close {
        background: none;
        border: none;
        font-size: 1.5rem;
        color: #6c757d;
        cursor: pointer;
        padding: 0.5rem;
        border-radius: 0.25rem;
        transition: background-color 0.3s ease;
    }
    
    .modal-close:hover {
        background: #f8f9fa;
        color: #495057;
    }
    
    .modal-body {
        padding: 1.5rem;
    }
    
    .program-detail-image {
        margin-bottom: 1.5rem;
    }
    
    .program-detail-image img {
        width: 100%;
        height: 300px;
        object-fit: cover;
        border-radius: 0.5rem;
    }
    
    .program-detail-meta {
        display: flex;
        gap: 0.5rem;
        margin-bottom: 1.5rem;
        flex-wrap: wrap;
    }
    
    .program-detail-description {
        margin-bottom: 2rem;
        line-height: 1.6;
        color: #495057;
    }
    
    .program-detail-sections {
        display: grid;
        gap: 1.5rem;
    }
    
    .detail-section h4 {
        display: flex;
        align-items: center;
        gap: 0.5rem;
        color: #212529;
        margin-bottom: 0.75rem;
        font-size: 1.1rem;
    }
    
    .detail-section h4 i {
        color: var(--primary-color);
    }
    
    .detail-section ul {
        list-style: none;
        padding: 0;
        margin: 0;
    }
    
    .detail-section li {
        padding: 0.5rem 0;
        border-bottom: 1px solid #f8f9fa;
        position: relative;
        padding-left: 1.5rem;
    }
    
    .detail-section li:before {
        content: "•";
        color: var(--primary-color);
        position: absolute;
        left: 0;
        top: 0.5rem;
    }
    
    .detail-section li:last-child {
        border-bottom: none;
    }
    
    /* Pagination */
    .pagination {
        margin-top: 3rem;
        text-align: center;
    }
    
    .pagination > div {
        display: inline-flex;
        gap: 0.5rem;
        flex-wrap: wrap;
        justify-content: center;
    }
    
    /* Responsive */
    @media (max-width: 768px) {
        .filter-container {
            flex-direction: column;
            align-items: center;
        }
        
        .programs-grid {
            grid-template-columns: 1fr;
        }
        
        .modal-content {
            margin: 1rem;
            max-height: calc(100vh - 2rem);
        }
        
        .pagination > div {
            gap: 0.25rem;
        }
        
        .pagination .btn {
            padding: 0.5rem 0.75rem;
            font-size: 0.9rem;
        }
    }
    
    .hidden {
        display: none !important;
    }
    </style>
</body>
</html>
